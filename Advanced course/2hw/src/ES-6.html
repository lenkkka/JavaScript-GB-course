<script>
    
//    Существует 2 вида метов - методы класса и методы объекта
    
    class Office{
         constructor(title,men){
             this.title = title;
             this.men = men;
         }
       /**
        * В этом методе изменяем оклад сотрудника с учетом премии или взыскания
        * @param man - объект класса Person, т.е. сотрудник у которого редактируем оклад
        * @param rate - процент от з/п, если он > 0, значит премия...
        */
        
        static setRate(man,rate){
            console.log(rate > 0 ? `Сотруднику ${man.fio} начислена премия!` : `Сотруднику ${man.fio} назначено взыскание`);
            man.salary += man.salary * rate / 100;
        }
        
         showInfo(){
             console.log(`В офисе ${this.title} работают следующие сотрудники:`);
             this.men.forEach(man => console.log(man.getInfo()));
         }
         //Найдем сотрудника с макс. окладом
         getManWithMax(){
            let manWithMaxSalary = this.men[0];
            for(let i = 1;i < this.men.length;i++){
                if(manWithMaxSalary.salary < this.men[i].salary){
                    manWithMaxSalary = this.men[i];
                }
            } 
            return manWithMaxSalary;
         }
         getManWithMin(){
            let manWithMinSalary = this.men[0];
            for(let i = 1;i < this.men.length;i++){
                if(manWithMinSalary.salary > this.men[i].salary){
                    manWithMinSalary = this.men[i];
                }
            } 
            return manWithMinSalary;
         }
    }
    
    class Person{
        //Конструктор класса - это метод, который описывает состояние объекта класса и вызывается автоматически при создании объекта через оператор new
        
        constructor(id,fio,age,salary){
            this.id = id;
            this.fio = fio;
            this.age = age;
            this.salary = salary;
        }
        
        _getInfo(){//_означает, что данный метод нужно запускать только из текущего класса и  и из потомков
            return `Сотруднику ${this.fio} ${this.age} лет. Его оклад ${this.salary}`;
        }
    }
    
    class Manager extends Person{
        //Если класс наследуется от класса в котором был конструктор,
        //то в потомке этого класса обязательно вызывать базовый конструктор
        //с помощью оператор super
        constructor(id,fio,age,salary,role){
            super(id,fio,age,salary);
            this.role = role;
        }
        
        _getInfo(){
            return `${super._getInfo()}\nРоль сотрудника: ${this.role}`;
        }
    }
    
    const man = new Manager(1,"Иванов",30,270000,"TeamLead");
    alert(man._getInfo());
//    const man1 = new Person(1,"Иванов",30,70000);
//    const man2 = new Person(2,"Петров",50,170000);
//    const man3 = new Person(3,"Сидоров",40,97000);
//    
//    let persons = [man1,man2,man3];
//    const office = new Office("ItStart",persons);
//    office.showInfo();
//    let maxSalaryMan = office.getManWithMax();
//    let minSalaryMan = office.getManWithMin();
//    console.log(`Сотрудник ${maxSalaryMan.fio} имеет максимальный оклад ${maxSalaryMan.salary}`);
//    console.log(`Сотрудник ${minSalaryMan.fio} имеет минимальный оклад ${minSalaryMan.salary}`);
//    const RATE = 20;//процентная величена премии и взыскания
//    Office.setRate(maxSalaryMan,-RATE);
//    Office.setRate(minSalaryMan,RATE);
//    console.log('Информация о сотрудниках после начисления премии и взыскания');
//    office.showInfo();
</script>